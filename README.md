# JamalC2

> **ç°ä»£åŒ–è½»é‡çº§å‘½ä»¤ä¸æ§åˆ¶æ¡†æ¶**  
> åŸºäº Rust + Tauri æ„å»º

---

## âœ¨ ç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| ğŸ” **ç«¯åˆ°ç«¯åŠ å¯†** | ChaCha20-Poly1305 è®¤è¯åŠ å¯† |
| ğŸŒ **HTTP Beacon** | è½»é‡çº§ HTTP è½®è¯¢é€šä¿¡ |
| ğŸ­ **æµé‡ä¼ªè£…** | éšæœº User-Agent + ä¼ªè£…ä¸šåŠ¡å­—æ®µ |
| â±ï¸ **åŠ¨æ€å¿ƒè·³** | å¯è°ƒèŠ‚é—´éš” + è‡ªåŠ¨ Â±20% æŠ–åŠ¨ |
| ğŸ–¥ï¸ **ç°ä»£ GUI** | React + Tauri è·¨å¹³å°ç•Œé¢ |
| ğŸ“¦ **è½»é‡ Implant** | Rust (~1MB) / C (~100KB) åŒç‰ˆæœ¬ |
| ğŸ›¡ï¸ **è§„é¿èƒ½åŠ›** | åæ²™ç®±æ£€æµ‹ + åŠ¨æ€APIè§£æ + ç¡çœ æ··æ·† |
| ğŸ§ **è·¨å¹³å° Server** | Windows (Tauri) / Linux (Docker) |

---

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPS/HTTP    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Implant   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   C2 Server  â”‚
â”‚  (Windows)  â”‚   ChaCha20 åŠ å¯†   â”‚  (Tauri App) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

##  åŠŸèƒ½åˆ—è¡¨

### å·²å®ç°

| åŠŸèƒ½ | æè¿° |
|------|------|
| âœ… Shell æ‰§è¡Œ | è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼Œ30ç§’è¶…æ—¶ |
| âœ… æ–‡ä»¶ç®¡ç† | æµè§ˆ/ä¸Šä¼ /ä¸‹è½½/åˆ é™¤ |
| âœ… å¿ƒè·³è°ƒèŠ‚ | å®æ—¶ä¿®æ”¹ Beacon é—´éš” |
| âœ… Jitter æŠ–åŠ¨ | >10ç§’è‡ªåŠ¨ Â±20% éšæœºåŒ– |
| âœ… æ–­å¼€è¿æ¥ | è¿œç¨‹ç»ˆæ­¢ Implant |
| âœ… Implant ç”Ÿæˆ | GUI ä¸€é”®ç”Ÿæˆ Rust/C åŒç‰ˆæœ¬ |
| âœ… æµé‡ä¼ªè£… | ä¼ªè£… Header + Body å­—æ®µ |
| âœ… å¯åŠ¨å¯†é’¥ | `-k <key>` éªŒè¯ + è‡ªåˆ é™¤ |
| âœ… åæ²™ç®±æ£€æµ‹ | è¿›ç¨‹æ•°/å†…å­˜/ç¡¬ç›˜/ç”¨æˆ·å/ç¡çœ åŠ é€Ÿæ£€æµ‹ |
| âœ… åŠ¨æ€ API è§£æ | å“ˆå¸Œæ··æ·† + PEB éå†ï¼Œè§„é¿é™æ€åˆ†æ |
| âœ… ç¡çœ æ··æ·† | ç¡çœ æœŸé—´åŠ å¯†æ•æ„Ÿæ•°æ® |

### è·¯çº¿å›¾

| åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|------|:------:|
| å±å¹•æˆªå›¾ | P1 |
| è¿›ç¨‹ç®¡ç† | P1 |
| é”®ç›˜è®°å½• | P2 |
| æŒä¹…åŒ– | P2 |

---

## ğŸ“¦ å®‰è£…

### ç¯å¢ƒè¦æ±‚

| ä¾èµ– | è¯´æ˜ |
|------|------|
| **Visual Studio Build Tools** | C++ ç¼–è¯‘å·¥å…·ï¼ˆå¿…é¡»æ‰‹åŠ¨å®‰è£…ï¼‰ |
| **Rust** | 1.70+ |
| **Node.js** | 18+ |

---

### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Visual Studio Build Toolsï¼ˆå¿…é¡»ï¼‰

> âš ï¸ **é‡è¦**ï¼šè¿™ä¸€æ­¥å¿…é¡»æ‰‹åŠ¨å®Œæˆï¼Œè‡ªåŠ¨å®‰è£…é€šå¸¸æ— æ³•æ­£ç¡®é…ç½® C++ ç»„ä»¶ã€‚

1. è®¿é—® https://visualstudio.microsoft.com/visual-cpp-build-tools/
2. ç‚¹å‡» **"ä¸‹è½½ Build Tools"**
3. è¿è¡Œä¸‹è½½çš„å®‰è£…ç¨‹åº
4. åœ¨å®‰è£…ç•Œé¢ä¸­ï¼Œ**å‹¾é€‰ "Desktop development with C++"**ï¼ˆä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘ï¼‰
5. ç‚¹å‡» **"å®‰è£…"**ï¼Œç­‰å¾…å®Œæˆï¼ˆçº¦ 10-20 åˆ†é’Ÿï¼‰
6. **é‡å¯ç”µè„‘**

#### éªŒè¯å®‰è£…

æ‰“å¼€ **"Developer Command Prompt for VS"**ï¼ˆå¼€å§‹èœå•æœç´¢ï¼‰ï¼Œè¿è¡Œï¼š

```cmd
cl.exe
```

å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚

---

### ç¬¬äºŒæ­¥ï¼šå®‰è£… Rust å’Œ Node.js

```powershell
# å®‰è£… Rust
winget install Rustlang.Rustup

# å®‰è£… Node.js
winget install OpenJS.NodeJS.LTS
```

å®‰è£…å**é‡å¯ç»ˆç«¯**ã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šå…‹éš†é¡¹ç›®å¹¶è¿è¡Œ

```powershell
# å…‹éš†é¡¹ç›®
git clone https://github.com/zalehuoer/jamal.git
cd jamal

# è¿è¡Œå®‰è£…è„šæœ¬ï¼ˆè‡ªåŠ¨å®‰è£… npm ä¾èµ–ï¼‰
.\install.bat

# æˆ–æ‰‹åŠ¨å®‰è£…ä¾èµ–
cd server
npm install
```

---

## ğŸ§ Linux æœåŠ¡ç«¯éƒ¨ç½²ï¼ˆDockerï¼‰

é€‚ç”¨äºéƒ¨ç½²åˆ° Linux VPS/äº‘æœåŠ¡å™¨ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—® Web ç®¡ç†ç•Œé¢ã€‚

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/zalehuoer/jamal.git
cd jamal

# è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x deploy.sh
./deploy.sh
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨ Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker compose build

# å¯åŠ¨æœåŠ¡
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æœåŠ¡
docker compose down
```

### é…ç½®ç«¯å£

ç¼–è¾‘ `docker-compose.yml`ï¼š

```yaml
ports:
  - "4444:4444"  # ä¿®æ”¹å·¦è¾¹çš„ç«¯å£å·
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ Server

```bash
cd server
npm run tauri dev
```

### 2. åˆ›å»ºç›‘å¬å™¨

**è®¾ç½®** â†’ è¾“å…¥ç«¯å£ â†’ **åˆ›å»ºå¹¶å¯åŠ¨**

### 3. ç”Ÿæˆ Implant

**ç”Ÿæˆ** â†’ é€‰æ‹©ç›‘å¬å™¨ â†’ å¡«å†™åœ°å€ â†’ **ç”Ÿæˆ**

### 4. éƒ¨ç½²

```powershell
.\implant.exe -k <key>
```

---

## ğŸŒ ä½¿ç”¨ HTTPSï¼ˆé€šè¿‡ ngrokï¼‰

### 1. å®‰è£… ngrok

è®¿é—® https://ngrok.com/download ä¸‹è½½å¹¶å®‰è£…ã€‚

### 2. å¯åŠ¨ ngrok è½¬å‘

```powershell
# ç¡®ä¿åœ¨è¿è¡Œ Server çš„åŒä¸€å°æœºå™¨ä¸Šæ‰§è¡Œ
ngrok http 127.0.0.1:4444
```

ngrok ä¼šæ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„åœ°å€ï¼š
```
Forwarding  https://abc123.ngrok-free.app -> http://localhost:4444
```

### 3. ç”Ÿæˆ Implantï¼ˆä½¿ç”¨ ngrok åœ°å€ï¼‰

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| æœåŠ¡å™¨åœ°å€ | `abc123.ngrok-free.app`ï¼ˆä¸å¸¦ https://ï¼‰ |
| ç«¯å£ | `443` |
| ä½¿ç”¨ HTTPS | âœ… å‹¾é€‰ |

### 4. éƒ¨ç½² Implant

```powershell
.\implant.exe -k <key>
```

> âš ï¸ **æ³¨æ„**ï¼šngrok å’Œ Server å¿…é¡»åœ¨**åŒä¸€å°æœºå™¨**ä¸Šè¿è¡Œï¼Œå¦åˆ™ä¼šå‡ºç° 502 é”™è¯¯ã€‚

---

## ğŸ”’ å®‰å…¨æœºåˆ¶

### åŠ å¯†

- **ç®—æ³•**: ChaCha20-Poly1305 (AEAD)
- **å¯†é’¥**: 256-bit
- **Nonce**: 12 å­—èŠ‚éšæœº

### æµé‡ä¼ªè£…

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "apiVersion": "2.1.0",
  "clientId": "a1b2c3d4-...",
  "authToken": "Bearer 8f2e4a...",
  "requestId": "req_1a2b3c...",
  "timestamp": 1703318400,
  "platform": "Windows",
  "data": "åŠ å¯†æ•°æ®..."
}
```

**Header ä¼ªè£…**:
- éšæœº User-Agent (Chrome/Firefox/Windows Update)
- X-Request-ID, X-Client-Version ç­‰

### è¿è¡Œä¿æŠ¤

- éœ€è¦ `-k <key>` å‚æ•°å¯åŠ¨
- å‚æ•°é”™è¯¯è‡ªåŠ¨åˆ é™¤è‡ªèº«

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
jamalC2/
â”œâ”€â”€ server/           # Windows æ§åˆ¶ç«¯ (Tauri + React)
â”œâ”€â”€ server-web/       # Linux æ§åˆ¶ç«¯ (Web API)
â”œâ”€â”€ implant/          # Rust Implant
â”œâ”€â”€ implant-c/        # C Implant (æ›´å°ä½“ç§¯ + è§„é¿èƒ½åŠ›)
â””â”€â”€ shared/           # å…±äº«åº“ (åŠ å¯† + æ¶ˆæ¯)
```

---

## âš™ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| Server å‰ç«¯ | React + TypeScript |
| Server åç«¯ | Rust + Tauri + Axum |
| Implant | Rust (ureq + native-tls) |
| åŠ å¯† | chacha20poly1305 |
| åºåˆ—åŒ– | serde + bincode |

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.1.0 (2024-12)

- âœ… **C Implant** - è½»é‡çº§ C ç‰ˆæœ¬ (~100KB)
- âœ… **åæ²™ç®±æ£€æµ‹** - 6 é¡¹æ£€æµ‹ + è¯„åˆ†ç³»ç»Ÿ
- âœ… **åŠ¨æ€ API è§£æ** - DJB2 å“ˆå¸Œ + PEB éå†
- âœ… **ç¡çœ æ··æ·†** - ç¡çœ æœŸé—´åŠ å¯†æ•æ„Ÿæ•°æ®
- âœ… **Linux æœåŠ¡ç«¯** - Docker ä¸€é”®éƒ¨ç½²
- âœ… **Implant ç”Ÿæˆå™¨** - æ”¯æŒ Rust/C åŒç‰ˆæœ¬

### v1.0.0 (2024-12)

- âœ… ChaCha20-Poly1305 åŠ å¯†é€šä¿¡
- âœ… HTTP Beacon è½®è¯¢
- âœ… æµé‡ä¼ªè£…ï¼ˆHeader + Bodyï¼‰
- âœ… å¯åŠ¨å¯†é’¥ + è‡ªåˆ é™¤
- âœ… å¿ƒè·³è°ƒèŠ‚ + Jitter æŠ–åŠ¨
- âœ… ä½“ç§¯ä¼˜åŒ–ï¼ˆ1.5MB â†’ 1MBï¼‰
- âœ… åŒæ­¥æ¶æ„é‡æ„ï¼ˆureq æ›¿ä»£ reqwestï¼‰

---

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·**ä»…ä¾›å®‰å…¨ç ”ç©¶å’Œæˆæƒæµ‹è¯•ä½¿ç”¨**ã€‚æœªç»æˆæƒå¯¹è®¡ç®—æœºç³»ç»Ÿè¿›è¡Œæ”»å‡»å±äºè¿æ³•è¡Œä¸ºã€‚ä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚
